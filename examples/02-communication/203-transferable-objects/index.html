<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Worker Transferable Objects</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Web Worker 可轉移物件 (Transferable Objects)</h1>
        <p>此示例比較了「結構化克隆 (Copy)」與「可轉移物件 (Transfer)」在傳遞大數據時的效能差異。Transferable Objects 透過轉移記憶體所有權來實現零拷貝傳輸。</p>

        <div class="controls">
            <div class="control-group">
                <label for="dataSize">資料大小:</label>
                <select id="dataSize">
                    <option value="10">10 MB</option>
                    <option value="50">50 MB</option>
                    <option value="100" selected>100 MB</option>
                    <option value="300">300 MB</option>
                </select>
            </div>

            <div class="btn-group">
                <button id="btnClone">使用 Clone (複製)</button>
                <button id="btnTransfer">使用 Transfer (轉移)</button>
            </div>
        </div>

        <div class="result-panel">
            <div class="metric-card">
                <h3>Clone 耗時</h3>
                <div id="cloneTime" class="value">--</div>
                <div class="unit">ms</div>
            </div>
            <div class="metric-card">
                <h3>Transfer 耗時</h3>
                <div id="transferTime" class="value">--</div>
                <div class="unit">ms</div>
            </div>
        </div>

        <div class="visualization">
            <h3>記憶體所有權狀態</h3>
            <div class="status-box">
                <div class="status-row">
                    <span class="label">主執行緒 Buffer 長度:</span>
                    <span id="mainBufferLen">0</span> bytes
                </div>
                <div class="status-row">
                    <span class="label">Worker Buffer 長度:</span>
                    <span id="workerBufferLen">Unknown</span>
                </div>
            </div>
        </div>

        <div class="log-panel">
            <h3>操作日誌</h3>
            <ul id="logList"></ul>
        </div>
    </div>
    <script src="main.js"></script>
</body>
</html>
