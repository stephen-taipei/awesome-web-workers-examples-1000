# Encoding Detection

此示例展示了如何使用 Web Worker 檢測文件的字元編碼。

## 技術原理

瀏覽器原生的 `FileReader` 通常要求我們預先知道編碼（預設 UTF-8）。為了檢測編碼，我們需要讀取原始的二進制數據（ArrayBuffer），並分析其位元組模式。

本示例實現了簡單的啟發式檢測算法：

1.  **BOM (Byte Order Mark) 檢查**：
    *   檢查文件開頭是否有特定的位元組序列（如 `EF BB BF` 為 UTF-8）。
    *   這是最準確的識別方式。

2.  **UTF-8 有效性檢查**：
    *   掃描位元組流，驗證是否符合 UTF-8 的編碼規則（如多位元組字符的後續位元組必須以 `10` 開頭）。
    *   如果整個文件都符合規則且包含多位元組字符，則極大機率是 UTF-8。

3.  **UTF-16 啟發式檢查**：
    *   檢查是否存在大量的空位元組（Null bytes），這是 ASCII 字符在 UTF-16 編碼下的特徵。

4.  **Big5 檢查**：
    *   檢查位元組是否符合 Big5 的雙位元組編碼範圍（常用於繁體中文環境）。

## 局限性

*   對於單字節編碼（如 ISO-8859-1 vs Windows-1252），由於它們共享相同的編碼空間，僅靠規則很難區分，通常需要基於語言的字符頻率統計分析（本示例未實現此高級功能）。
*   本工具僅作為客戶端快速檢測的參考，不保證 100% 準確。
