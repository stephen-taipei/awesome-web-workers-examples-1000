# Lanczos 縮放 (Lanczos Scaling)

Lanczos 縮放是一種使用 Lanczos 濾波器（基於 Sinc 函數的加窗函數）進行圖像重採樣的算法。它通常被認為是圖像縮放中品質與性能折衷的最佳選擇之一，能夠產生銳利且清晰的圖像，同時減少混疊和振鈴效應。

## 原理

Lanczos 濾波器的核函數為：
`L(x) = sinc(x) * sinc(x/a)`
其中 `sinc(x) = sin(πx) / (πx)`，`a` 是一個參數，控制濾波器的大小（窗口半徑）。常用的有 `a=2` (Lanczos-2) 和 `a=3` (Lanczos-3)。

縮放過程可以分為兩步（可分離濾波）：
1.  **水平縮放**：將圖像的每一行縮放到目標寬度。
2.  **垂直縮放**：將水平縮放後的圖像的每一列縮放到目標高度。

## 使用方式

1.  上傳圖片。
2.  調整「縮放比例」。
3.  選擇「Lanczos 窗口大小」（2 或 3）。
4.  點擊「開始縮放」。

## 技術實現

*   **Web Worker**：由於涉及大量的浮點運算（卷積），必須在後台執行緒進行。
*   **可分離卷積**：為了優化性能，將 2D 卷積分解為兩個 1D 卷積。這將計算複雜度從 O(kernel_size^2) 降低到 O(kernel_size)。
*   **中間緩衝**：使用 `Float32Array` 存儲第一步（水平縮放）的結果，以保持精度，避免在中間步驟進行過早的捨入（轉換為 Uint8）。
