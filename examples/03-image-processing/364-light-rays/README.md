# Light Rays (Volumetric Light)

此示例展示了如何使用 Web Worker 實現體積光（God Rays）效果。這是一種模擬光線穿過介質（如空氣中的灰塵）時產生的視覺效果。

## 技術原理

此效果通常透過後處理（Post-processing）技術實現，核心算法為徑向模糊（Radial Blur）。

1.  **閾值處理 (Thresholding)**：首先從原始圖片中提取高亮部分（光源）。只有亮度超過閾值的像素才會產生光線。
2.  **徑向模糊 (Radial Blur)**：以光源位置為中心，對提取出的高亮部分進行多次採樣和模糊。
    *   對於每個像素，計算它到光源的向量。
    *   沿著該向量向光源方向進行多次採樣。
    *   將採樣值進行加權累加，並應用衰減係數（Decay），使光線隨距離減弱。
3.  **合成 (Compositing)**：將生成的模糊光線圖像疊加回原始圖像上。

## 參數說明

*   **光線強度 (Intensity)**：控制光線的整體亮度。
*   **光線衰減 (Decay)**：控制光線隨距離減弱的速度。值越接近 1，光線傳播越遠。
*   **密度 (Density)**：控制採樣點之間的距離。影響光線的連續性和長度。
*   **採樣權重 (Weight)**：每個採樣點的基礎權重。
*   **閾值 (Threshold)**：決定哪些像素被視為光源。值越高，只有越亮的部分會發光。

## 效能考量

此算法在 CPU 上執行計算量較大（O(Width * Height * Samples)）。
*   使用了 `Web Worker` 來避免阻塞主執行緒。
*   使用了 `Uint8ClampedArray` 進行像素操作。
*   實際應用中，通常會先將圖片縮小（Downsampling）再進行模糊計算，然後放大疊加，以大幅提升效能並獲得更柔和的效果。本示例為保持算法清晰，直接在原圖尺寸上計算（但限制了最大上傳尺寸）。

## 使用方式

1.  上傳一張包含明亮光源（如太陽、燈光）的圖片。
2.  在圖片上點擊以設定光源位置（預設為中心）。
3.  調整參數以獲得最佳效果。
