# 晶格化效果 (Crystallize)

本範例展示如何使用 Web Worker 實現圖像的晶格化效果（Voronoi Diagram）。

## 功能簡介

- **晶格化處理**：將圖像轉換為類似水晶或彩色玻璃的晶格效果。
- **Voronoi 算法**：利用優化的 Voronoi 圖算法，根據特徵點最近鄰原則填充顏色。
- **Web Worker**：將密集的距離計算與像素填充操作移至後台執行緒，避免阻塞 UI。

## 技術重點

1.  **Voronoi 圖 (Voronoi Diagram)**：
    -   將平面分割為多個區域，每個區域內的點到其對應的種子點（特徵點）距離最近。
    -   本例中，種子點的顏色取自原圖在該位置的顏色。

2.  **網格優化 (Grid Optimization)**：
    -   為了加速最近鄰搜索，將圖像劃分為網格。
    -   每個網格單元內生成一個隨機種子點。
    -   對於任意像素，只需檢查其所在網格及周圍 8 個鄰居網格中的種子點，將算法複雜度從 $O(W \times H \times N)$ 降低到 $O(W \times H)$。

3.  **效能考量**：
    -   使用 `ImageData` 進行像素級操作。
    -   使用平方歐幾里得距離（避免開根號）進行比較，提高運算速度。

## 使用方式

1.  開啟網頁。
2.  拖放或選擇一張圖片上傳。
3.  調整「晶格大小」滑桿，設定晶格的粗細程度。
4.  點擊「應用效果」按鈕開始處理。
5.  處理完成後，可預覽並下載結果圖片。
