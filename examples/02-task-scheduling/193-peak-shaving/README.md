# 峰值分流 (Peak Shaving)

此範例展示如何在高併發場景下保護系統，實現「峰值分流」(Peak Shaving) 和「背壓」(Backpressure) 機制。

## 核心機制

1.  **資源限制**: 設定系統最大併發處理能力 (Max Concurrent Workers)。
2.  **緩衝佇列**: 當所有 Worker 都在忙碌時，新的請求會進入佇列等待。
3.  **拒絕策略**: 當佇列達到上限 (Queue Capacity) 時，系統會直接拒絕新的請求，而不是無限堆積導致記憶體溢出或響應時間過長。

## 功能

*   **參數配置**: 可動態調整 Worker 數量上限與佇列容量。
*   **流量模擬**: 可單次提交或模擬突發流量 (Burst)。
*   **儀表板**: 即時監控活躍 Worker、佇列長度、總提交數與拒絕數。
*   **視覺化**: 透過進度條顯示當前系統負載。

## 使用方法

1.  設定想要的最大併發數與佇列容量，點擊「套用設定」。
2.  點擊「提交 1 個任務」觀察正常流程。
3.  點擊「模擬突發流量」觀察佇列填滿與請求被拒絕的情況。
4.  觀察日誌中不同顏色的狀態：
    *   🔵 藍色: 任務開始執行
    *   🟡 黃色: 任務進入佇列
    *   🟢 綠色: 任務完成
    *   🔴 紅色: 任務被拒絕

## 應用場景

*   伺服器請求過載保護。
*   前端大批量資料處理（如圖片轉檔、Excel 解析）時防止瀏覽器卡死。
