self.onmessage=e=>{const start=performance.now();const moves=['A1','A2','A3','B1','B2','B3','C1','C2','C3'];const stats=moves.map(()=>({wins:0,visits:0}));for(let i=0;i<e.data.simulations;i++){const moveIdx=selectMove(stats);stats[moveIdx].visits++;if(simulate())stats[moveIdx].wins++;}let best=0,bestScore=-1;for(let i=0;i<moves.length;i++){const score=stats[i].visits>0?stats[i].wins/stats[i].visits:0;if(score>bestScore){bestScore=score;best=i;}}const time=performance.now()-start;self.postMessage({bestMove:moves[best],winRate:bestScore,time});};
function selectMove(stats){const total=stats.reduce((s,m)=>s+m.visits,0)||1;let best=-1,bestUCB=-Infinity;for(let i=0;i<stats.length;i++){const exploit=stats[i].visits>0?stats[i].wins/stats[i].visits:0.5;const explore=Math.sqrt(2*Math.log(total)/(stats[i].visits||1));const ucb=exploit+explore;if(ucb>bestUCB){bestUCB=ucb;best=i;}}return best;}
function simulate(){return Math.random()>0.4;}
