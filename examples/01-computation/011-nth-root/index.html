<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#011 N次方根計算 - Web Workers 範例</title>
    <meta name="description" content="使用 Web Worker 計算任意次方根，支援整數和分數次方">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- 頁首 -->
        <header class="header">
            <h1>N 次方根計算</h1>
            <p class="subtitle">Arbitrary Nth Root Calculator</p>
            <div class="badge-container">
                <span class="badge badge-primary">#011</span>
                <span class="badge badge-secondary">計算密集型</span>
                <span class="badge badge-intermediate">進階</span>
            </div>
            <div class="formula-display">
                <sup class="highlight">n</sup><span class="root-symbol">√</span><span class="highlight">x</span> =
                <span class="highlight">x<sup>1/n</sup></span>
                （支援任意正整數 n）
            </div>
        </header>

        <!-- 單一計算 -->
        <section class="card">
            <h2 class="card-title">計算 N 次方根</h2>

            <div class="input-row">
                <div class="form-group">
                    <label class="form-label" for="single-number">數字 (x)</label>
                    <input type="text" id="single-number" class="form-input" value="2" placeholder="輸入數字">
                </div>
                <div class="form-group">
                    <label class="form-label" for="single-n">次數 (n)</label>
                    <input type="number" id="single-n" class="form-input" value="5" min="1" step="1" placeholder="方根次數">
                </div>
                <div class="form-group">
                    <label class="form-label" for="single-precision">精度</label>
                    <input type="number" id="single-precision" class="form-input" value="100" min="1" max="10000">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">常用數字</label>
                <div class="preset-buttons">
                    <button class="preset-btn" data-value="2">2</button>
                    <button class="preset-btn" data-value="10">10</button>
                    <button class="preset-btn" data-value="100">100</button>
                    <button class="preset-btn" data-value="1024">1024</button>
                    <button class="preset-btn" data-value="-32">-32</button>
                    <button class="preset-btn" data-value="3.14159">π</button>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">常用次數</label>
                <div class="preset-buttons">
                    <button class="preset-n-btn" data-n="2">√ (2)</button>
                    <button class="preset-n-btn" data-n="3">∛ (3)</button>
                    <button class="preset-n-btn" data-n="4">∜ (4)</button>
                    <button class="preset-n-btn" data-n="5">5</button>
                    <button class="preset-n-btn" data-n="10">10</button>
                    <button class="preset-n-btn" data-n="12">12</button>
                </div>
            </div>

            <div id="error-message" class="error-message hidden"></div>

            <div class="btn-group">
                <button id="calculate-btn" class="btn btn-primary">計算方根</button>
                <button id="verify-btn" class="btn btn-info">驗證結果</button>
                <button id="stop-btn" class="btn btn-danger" disabled>停止</button>
            </div>
        </section>

        <!-- 批量計算 -->
        <section class="card">
            <h2 class="card-title">批量計算</h2>
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                計算多個數字的同一次方根
            </p>

            <div class="form-group">
                <label class="form-label" for="batch-numbers">數字列表（逗號分隔）</label>
                <textarea id="batch-numbers" class="form-input" rows="3" placeholder="例如：2, 8, 27, 64, 125">2, 8, 27, 64, 125, 216, 343, 512, 729, 1000</textarea>
            </div>

            <div class="input-row-2">
                <div class="form-group">
                    <label class="form-label" for="batch-n">次數 (n)</label>
                    <input type="number" id="batch-n" class="form-input" value="3" min="1">
                </div>
                <div class="form-group">
                    <label class="form-label" for="batch-precision">精度</label>
                    <input type="number" id="batch-precision" class="form-input" value="50" min="1" max="1000">
                </div>
            </div>

            <button id="batch-btn" class="btn btn-secondary">批量計算</button>
        </section>

        <!-- 方根表格 -->
        <section class="card">
            <h2 class="card-title">方根表格</h2>
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                計算同一數字的 2 到 n 次方根
            </p>

            <div class="input-row">
                <div class="form-group">
                    <label class="form-label" for="table-number">數字</label>
                    <input type="text" id="table-number" class="form-input" value="1000000" placeholder="輸入正數">
                </div>
                <div class="form-group">
                    <label class="form-label" for="table-max-n">最大次數</label>
                    <input type="number" id="table-max-n" class="form-input" value="20" min="2" max="100">
                </div>
                <div class="form-group">
                    <label class="form-label" for="table-precision">精度</label>
                    <input type="number" id="table-precision" class="form-input" value="30" min="1" max="500">
                </div>
            </div>

            <button id="table-btn" class="btn btn-secondary">產生表格</button>
        </section>

        <!-- 方法比較 -->
        <section class="card">
            <h2 class="card-title">演算法比較</h2>
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                比較牛頓法和二分法的效能
            </p>

            <div class="input-row">
                <div class="form-group">
                    <label class="form-label" for="compare-number">數字</label>
                    <input type="text" id="compare-number" class="form-input" value="2" placeholder="輸入數字">
                </div>
                <div class="form-group">
                    <label class="form-label" for="compare-n">次數</label>
                    <input type="number" id="compare-n" class="form-input" value="5" min="1">
                </div>
                <div class="form-group">
                    <label class="form-label" for="compare-precision">精度</label>
                    <input type="number" id="compare-precision" class="form-input" value="200" min="1" max="5000">
                </div>
            </div>

            <button id="compare-btn" class="btn btn-info">比較方法</button>
        </section>

        <!-- 進度 -->
        <section class="card">
            <h2 class="card-title">計算進度</h2>
            <div class="progress-container">
                <div class="progress-bar-wrapper">
                    <div id="progress-bar" class="progress-bar" style="width: 0%">0%</div>
                </div>
                <p id="progress-text" class="progress-text">準備就緒</p>
            </div>
        </section>

        <!-- 結果區域 -->
        <section id="calculate-result" class="card result-section hidden"></section>
        <section id="verify-result" class="card result-section hidden"></section>
        <section id="batch-result" class="card result-section hidden"></section>
        <section id="table-result" class="card result-section hidden"></section>
        <section id="compare-result" class="card result-section hidden"></section>

        <!-- 說明 -->
        <section class="card info-section">
            <h3>關於此範例</h3>
            <ul>
                <li><strong>通用公式：</strong><sup>n</sup>√x = x<sup>1/n</sup>，求 y 使得 y<sup>n</sup> = x</li>
                <li><strong>牛頓迭代：</strong>x<sub>k+1</sub> = ((n-1)·x<sub>k</sub> + S/x<sub>k</sub><sup>n-1</sup>) / n</li>
                <li><strong>負數處理：</strong>僅奇數次方根支援負數（如 <sup>3</sup>√-8 = -2）</li>
                <li><strong>收斂特性：</strong>牛頓法二次收斂，每次迭代有效位數加倍</li>
                <li><strong>精度支援：</strong>使用 BigInt 實現任意精度計算</li>
                <li><strong>表格功能：</strong>一次計算同一數字的多個次方根</li>
            </ul>
        </section>

        <!-- 頁尾 -->
        <footer class="footer">
            <p>
                <a href="../../../">Awesome Web Workers Examples 1000</a>
                &nbsp;|&nbsp;
                範例 #011 - N 次方根計算
            </p>
        </footer>
    </div>

    <script src="main.js"></script>
</body>
</html>
