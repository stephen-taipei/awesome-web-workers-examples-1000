<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#097 Simpson's Integration - Web Worker Example</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>#097 Simpson's Integration</h1>
            <p class="description">Numerical integration using composite Simpson's 1/3 and 3/8 rules</p>
        </header>

        <div class="controls">
            <div class="control-group">
                <label for="functionSelect">Function f(x):</label>
                <select id="functionSelect" onchange="updateFunction()">
                    <option value="polynomial">x³ (integral: x⁴/4)</option>
                    <option value="sin">sin(x) (integral: -cos(x))</option>
                    <option value="exp">e^x (integral: e^x)</option>
                    <option value="gaussian">e^(-x²) (Gaussian)</option>
                    <option value="log">ln(x) (integral: x·ln(x) - x)</option>
                    <option value="rational">1/(1+x²) (integral: arctan(x))</option>
                    <option value="custom">Custom function</option>
                </select>
            </div>

            <div id="customInput" class="control-group" style="display: none;">
                <label for="customFunction">Custom f(x):</label>
                <input type="text" id="customFunction" placeholder="Math.sin(x) * Math.cos(x)">
                <small>Use JavaScript math syntax</small>
            </div>

            <div class="control-row">
                <div class="control-group half">
                    <label for="a">Lower Bound (a):</label>
                    <input type="number" id="a" value="0" step="0.1">
                </div>
                <div class="control-group half">
                    <label for="b">Upper Bound (b):</label>
                    <input type="number" id="b" value="1" step="0.1">
                </div>
            </div>

            <div class="control-row">
                <div class="control-group half">
                    <label for="n">Number of Subintervals (n):</label>
                    <input type="number" id="n" value="100" min="2" max="1000000" step="2">
                    <small>Must be even for Simpson's 1/3 rule</small>
                </div>
                <div class="control-group half">
                    <label for="method">Method:</label>
                    <select id="method">
                        <option value="1/3">Simpson's 1/3 Rule</option>
                        <option value="3/8">Simpson's 3/8 Rule</option>
                        <option value="both">Compare Both</option>
                    </select>
                </div>
            </div>

            <div class="sample-buttons">
                <button class="btn-secondary" onclick="loadSample('polynomial')">∫x³ [0,1]</button>
                <button class="btn-secondary" onclick="loadSample('sin')">∫sin(x) [0,π]</button>
                <button class="btn-secondary" onclick="loadSample('gaussian')">∫e^(-x²) [0,2]</button>
                <button class="btn-secondary" onclick="loadSample('compare')">Compare methods</button>
            </div>

            <button id="calculateBtn" class="btn-primary" onclick="calculate()">Calculate Integral</button>
        </div>

        <div id="progress" class="progress-container" style="display: none;">
            <div class="progress-bar">
                <div id="progressBar" class="progress-fill"></div>
            </div>
            <span id="progressText">Processing...</span>
        </div>

        <div id="results" class="results"></div>

        <div class="info-section">
            <h3>About Simpson's Rule</h3>
            <p>Simpson's rules use polynomial interpolation to achieve higher accuracy than the trapezoidal rule.</p>

            <h4>Simpson's 1/3 Rule</h4>
            <div class="formula">
                ∫f(x)dx ≈ h/3 × [f(a) + 4f(x₁) + 2f(x₂) + 4f(x₃) + ... + f(b)]
            </div>
            <p>Uses quadratic (parabolic) interpolation. Requires even n.</p>

            <h4>Simpson's 3/8 Rule</h4>
            <div class="formula">
                ∫f(x)dx ≈ 3h/8 × [f(a) + 3f(x₁) + 3f(x₂) + 2f(x₃) + ...]
            </div>
            <p>Uses cubic interpolation. Requires n divisible by 3.</p>

            <h4>Properties</h4>
            <table class="info-table">
                <tr><th>Property</th><th>1/3 Rule</th><th>3/8 Rule</th></tr>
                <tr><td>Order of accuracy</td><td>O(h⁴)</td><td>O(h⁴)</td></tr>
                <tr><td>Exact for</td><td>Cubics</td><td>Cubics</td></tr>
                <tr><td>Requires</td><td>Even n</td><td>n divisible by 3</td></tr>
                <tr><td>Weights pattern</td><td>1,4,2,4,...,1</td><td>1,3,3,2,3,3,...,1</td></tr>
            </table>

            <h4>Why Simpson's is Better</h4>
            <ul>
                <li><strong>Higher order:</strong> O(h⁴) vs O(h²) for trapezoidal</li>
                <li><strong>Fewer points:</strong> Same accuracy with fewer evaluations</li>
                <li><strong>Exact for cubics:</strong> Perfect for polynomial-like functions</li>
            </ul>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>
