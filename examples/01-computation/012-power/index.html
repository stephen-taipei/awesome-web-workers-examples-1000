<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#012 冪運算 - Web Workers 範例</title>
    <meta name="description" content="使用 Web Worker 與快速冪算法計算大數冪運算">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- 頁首 -->
        <header class="header">
            <h1>冪運算</h1>
            <p class="subtitle">Large Number Exponentiation</p>
            <div class="badge-container">
                <span class="badge badge-primary">#012</span>
                <span class="badge badge-secondary">計算密集型</span>
                <span class="badge badge-success">入門</span>
            </div>
            <div class="formula-display">
                <span class="highlight">a<sup>n</sup></span> = a × a × ... × a
                （使用快速冪算法，O(log n) 複雜度）
            </div>
        </header>

        <!-- 基本計算 -->
        <section class="card">
            <h2 class="card-title">計算冪次</h2>

            <div class="input-row">
                <div class="form-group">
                    <label class="form-label" for="base">底數 (a)</label>
                    <input type="text" id="base" class="form-input" value="2" placeholder="輸入底數">
                </div>
                <div class="form-group">
                    <label class="form-label" for="exponent">指數 (n)</label>
                    <input type="text" id="exponent" class="form-input" value="1000" placeholder="輸入指數">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">常用計算</label>
                <div class="preset-buttons">
                    <button class="preset-btn" data-base="2" data-exp="10">2¹⁰</button>
                    <button class="preset-btn" data-base="2" data-exp="100">2¹⁰⁰</button>
                    <button class="preset-btn" data-base="2" data-exp="1000">2¹⁰⁰⁰</button>
                    <button class="preset-btn" data-base="10" data-exp="100">10¹⁰⁰</button>
                    <button class="preset-btn" data-base="3" data-exp="100">3¹⁰⁰</button>
                    <button class="preset-btn" data-base="7" data-exp="50">7⁵⁰</button>
                </div>
            </div>

            <div id="error-message" class="error-message hidden"></div>

            <div class="btn-group">
                <button id="calculate-btn" class="btn btn-primary">計算</button>
                <button id="stop-btn" class="btn btn-danger" disabled>停止</button>
            </div>
        </section>

        <!-- 2 的冪次 -->
        <section class="card">
            <h2 class="card-title">2 的冪次</h2>
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                計算 2ⁿ 並分析結果特性
            </p>

            <div class="input-row">
                <div class="form-group">
                    <label class="form-label" for="two-exponent">指數 (n)</label>
                    <input type="text" id="two-exponent" class="form-input" value="1024" placeholder="輸入指數">
                </div>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="show-full-digits">
                <label for="show-full-digits">顯示完整數字（大指數時可能很慢）</label>
            </div>

            <div class="btn-group">
                <button id="two-btn" class="btn btn-secondary">計算 2ⁿ</button>
            </div>
        </section>

        <!-- 批量計算 -->
        <section class="card">
            <h2 class="card-title">批量計算</h2>
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                每行一個運算式，格式：底數^指數
            </p>

            <div class="form-group">
                <label class="form-label" for="batch-input">計算式列表</label>
                <textarea id="batch-input" class="form-input" rows="5" placeholder="2^10&#10;3^20&#10;5^15">2^100
3^50
5^30
7^25
11^20</textarea>
            </div>

            <button id="batch-btn" class="btn btn-secondary">批量計算</button>
        </section>

        <!-- 冪塔 -->
        <section class="card">
            <h2 class="card-title">冪塔計算</h2>
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                計算 a^a^a^...^a（迭代冪次）
            </p>

            <div class="input-row-3">
                <div class="form-group">
                    <label class="form-label" for="tower-base">底數</label>
                    <input type="text" id="tower-base" class="form-input" value="2" placeholder="底數">
                </div>
                <div class="form-group">
                    <label class="form-label" for="tower-height">高度 (1-10)</label>
                    <input type="number" id="tower-height" class="form-input" value="4" min="1" max="10">
                </div>
                <div class="form-group">
                    <label class="form-label" for="tower-max-digits">最大位數</label>
                    <input type="number" id="tower-max-digits" class="form-input" value="10000" min="100" max="1000000">
                </div>
            </div>

            <button id="tower-btn" class="btn btn-secondary">計算冪塔</button>
        </section>

        <!-- 方法比較 -->
        <section class="card">
            <h2 class="card-title">演算法比較</h2>
            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                比較快速冪與樸素迭代的效能
            </p>

            <div class="input-row">
                <div class="form-group">
                    <label class="form-label" for="compare-base">底數</label>
                    <input type="text" id="compare-base" class="form-input" value="2" placeholder="底數">
                </div>
                <div class="form-group">
                    <label class="form-label" for="compare-exponent">指數</label>
                    <input type="text" id="compare-exponent" class="form-input" value="5000" placeholder="指數">
                </div>
            </div>

            <button id="compare-btn" class="btn btn-info">比較方法</button>
        </section>

        <!-- 進度 -->
        <section class="card">
            <h2 class="card-title">計算進度</h2>
            <div class="progress-container">
                <div class="progress-bar-wrapper">
                    <div id="progress-bar" class="progress-bar" style="width: 0%">0%</div>
                </div>
                <p id="progress-text" class="progress-text">準備就緒</p>
            </div>
        </section>

        <!-- 結果區域 -->
        <section id="calculate-result" class="card result-section hidden"></section>
        <section id="two-result" class="card result-section hidden"></section>
        <section id="batch-result" class="card result-section hidden"></section>
        <section id="tower-result" class="card result-section hidden"></section>
        <section id="compare-result" class="card result-section hidden"></section>

        <!-- 說明 -->
        <section class="card info-section">
            <h3>關於此範例</h3>
            <ul>
                <li><strong>快速冪算法：</strong>利用指數的二進位表示，將 O(n) 降為 O(log n)</li>
                <li><strong>BigInt 支援：</strong>JavaScript 原生大數支援，無精度限制</li>
                <li><strong>2 的冪次：</strong>使用位移運算，效率更高</li>
                <li><strong>冪塔：</strong>a↑↑n = a^a^...^a（n 層），增長極快</li>
                <li><strong>負指數：</strong>a⁻ⁿ = 1/aⁿ，返回分數形式</li>
            </ul>
        </section>

        <!-- 頁尾 -->
        <footer class="footer">
            <p>
                <a href="../../../">Awesome Web Workers Examples 1000</a>
                &nbsp;|&nbsp;
                範例 #012 - 冪運算
            </p>
        </footer>
    </div>

    <script src="main.js"></script>
</body>
</html>
