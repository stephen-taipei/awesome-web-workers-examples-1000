<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>#014 離散對數 - Web Workers 範例</title>
    <meta name="description" content="使用 Web Worker 計算離散對數，展示密碼學安全基礎">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- 頁首 -->
        <header class="header">
            <h1>離散對數</h1>
            <p class="subtitle">Discrete Logarithm Problem</p>
            <div class="badge-container">
                <span class="badge badge-primary">#014</span>
                <span class="badge badge-secondary">計算密集型</span>
                <span class="badge badge-warning">中級</span>
            </div>
            <div class="formula-display">
                給定 g, h, p，求 <span class="highlight">x</span> 使得
                g<sup>x</sup> ≡ h (mod p)
            </div>
        </header>

        <!-- 基本計算 -->
        <section class="card">
            <h2 class="card-title">🔍 計算離散對數</h2>
            <p class="card-description">
                給定生成元 g、目標 h 和模數 p，求 x 使得 g^x ≡ h (mod p)
            </p>

            <div class="input-row-3">
                <div class="form-group">
                    <label class="form-label" for="generator">生成元 (g)</label>
                    <input type="text" id="generator" class="form-input" value="5" placeholder="生成元">
                </div>
                <div class="form-group">
                    <label class="form-label" for="target">目標值 (h)</label>
                    <input type="text" id="target" class="form-input" value="8" placeholder="目標值">
                </div>
                <div class="form-group">
                    <label class="form-label" for="modulus">模數 (p)</label>
                    <input type="text" id="modulus" class="form-input" value="23" placeholder="質數模數">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="method">計算方法</label>
                <select id="method" class="form-input">
                    <option value="auto">自動選擇</option>
                    <option value="brute">暴力搜尋</option>
                    <option value="bsgs">Baby-step Giant-step</option>
                    <option value="pollard">Pollard's Rho</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">範例問題</label>
                <div class="preset-buttons">
                    <button class="preset-btn problem-preset" data-g="5" data-h="8" data-p="23">5^x≡8 (mod 23)</button>
                    <button class="preset-btn problem-preset" data-g="2" data-h="9" data-p="11">2^x≡9 (mod 11)</button>
                    <button class="preset-btn problem-preset" data-g="3" data-h="13" data-p="17">3^x≡13 (mod 17)</button>
                    <button class="preset-btn problem-preset" data-g="2" data-h="1000" data-p="9973">2^x≡1000 (mod 9973)</button>
                </div>
            </div>

            <div id="error-message" class="error-message hidden"></div>

            <div class="btn-group">
                <button id="calculate-btn" class="btn btn-primary">計算離散對數</button>
                <button id="stop-btn" class="btn btn-danger" disabled>停止</button>
            </div>
        </section>

        <!-- DH 攻擊演示 -->
        <section class="card">
            <h2 class="card-title">⚔️ Diffie-Hellman 攻擊演示</h2>
            <p class="card-description">
                展示如何透過計算離散對數來破解 DH 金鑰交換
            </p>

            <div class="input-row">
                <div class="form-group">
                    <label class="form-label" for="dh-prime">質數 (p)</label>
                    <input type="text" id="dh-prime" class="form-input" value="23" placeholder="公開的質數">
                </div>
                <div class="form-group">
                    <label class="form-label" for="dh-generator">生成元 (g)</label>
                    <input type="text" id="dh-generator" class="form-input" value="5" placeholder="公開的生成元">
                </div>
            </div>

            <div class="input-row">
                <div class="form-group">
                    <label class="form-label" for="dh-alice-public">Alice 公鑰 (A = g^a)</label>
                    <input type="text" id="dh-alice-public" class="form-input" value="8" placeholder="攔截的 Alice 公鑰">
                </div>
                <div class="form-group">
                    <label class="form-label" for="dh-bob-public">Bob 公鑰 (B = g^b)</label>
                    <input type="text" id="dh-bob-public" class="form-input" value="19" placeholder="攔截的 Bob 公鑰">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">預設場景（點擊自動產生公鑰）</label>
                <div class="preset-buttons">
                    <button class="preset-btn dh-preset" data-p="23" data-g="5">p=23, g=5</button>
                    <button class="preset-btn dh-preset" data-p="97" data-g="5">p=97, g=5</button>
                    <button class="preset-btn dh-preset" data-p="9973" data-g="2">p=9973, g=2</button>
                </div>
            </div>

            <button id="dh-attack-btn" class="btn btn-danger">🔓 嘗試破解 DH</button>
        </section>

        <!-- 元素階計算 -->
        <section class="card">
            <h2 class="card-title">🔢 元素階計算</h2>
            <p class="card-description">
                計算元素 a 在模 p 下的乘法階（最小的 k 使 a^k ≡ 1）
            </p>

            <div class="input-row">
                <div class="form-group">
                    <label class="form-label" for="order-element">元素 (a)</label>
                    <input type="text" id="order-element" class="form-input" value="5" placeholder="輸入元素">
                </div>
                <div class="form-group">
                    <label class="form-label" for="order-modulus">模數 (p)</label>
                    <input type="text" id="order-modulus" class="form-input" value="23" placeholder="質數模數">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">範例</label>
                <div class="preset-buttons">
                    <button class="preset-btn order-preset" data-a="2" data-p="11">2 mod 11</button>
                    <button class="preset-btn order-preset" data-a="5" data-p="23">5 mod 23</button>
                    <button class="preset-btn order-preset" data-a="3" data-p="17">3 mod 17</button>
                    <button class="preset-btn order-preset" data-a="2" data-p="101">2 mod 101</button>
                </div>
            </div>

            <button id="order-btn" class="btn btn-secondary">計算元素階</button>
        </section>

        <!-- 批量計算 -->
        <section class="card">
            <h2 class="card-title">📊 批量計算</h2>
            <p class="card-description">
                每行一個問題，格式：log_g(h) mod p 或 g h p
            </p>

            <div class="form-group">
                <label class="form-label" for="batch-input">計算式列表</label>
                <textarea id="batch-input" class="form-input" rows="5" placeholder="log_5(8) mod 23&#10;2 9 11&#10;3 13 17">log_5(8) mod 23
log_2(9) mod 11
log_3(13) mod 17
2, 1024, 9973
5, 4, 23</textarea>
            </div>

            <button id="batch-btn" class="btn btn-secondary">批量計算</button>
        </section>

        <!-- 方法比較 -->
        <section class="card">
            <h2 class="card-title">⚡ 演算法比較</h2>
            <p class="card-description">
                比較暴力法、BSGS 和 Pollard's Rho 的效能
            </p>

            <div class="input-row-3">
                <div class="form-group">
                    <label class="form-label" for="compare-generator">生成元</label>
                    <input type="text" id="compare-generator" class="form-input" value="2" placeholder="生成元">
                </div>
                <div class="form-group">
                    <label class="form-label" for="compare-target">目標值</label>
                    <input type="text" id="compare-target" class="form-input" value="12345" placeholder="目標值">
                </div>
                <div class="form-group">
                    <label class="form-label" for="compare-modulus">模數</label>
                    <input type="text" id="compare-modulus" class="form-input" value="99991" placeholder="模數">
                </div>
            </div>

            <button id="compare-btn" class="btn btn-info">比較方法</button>
        </section>

        <!-- 進度 -->
        <section class="card">
            <h2 class="card-title">📈 計算進度</h2>
            <div class="progress-container">
                <div class="progress-bar-wrapper">
                    <div id="progress-bar" class="progress-bar" style="width: 0%">0%</div>
                </div>
                <p id="progress-text" class="progress-text">準備就緒</p>
            </div>
        </section>

        <!-- 結果區域 -->
        <section id="calculate-result" class="card result-section hidden"></section>
        <section id="dh-result" class="card result-section hidden"></section>
        <section id="order-result" class="card result-section hidden"></section>
        <section id="batch-result" class="card result-section hidden"></section>
        <section id="compare-result" class="card result-section hidden"></section>

        <!-- 說明 -->
        <section class="card info-section">
            <h3>🔐 關於此範例</h3>
            <ul>
                <li><strong>離散對數問題：</strong>給定 g^x ≡ h (mod p)，求 x。這是計算困難的問題</li>
                <li><strong>暴力搜尋：</strong>O(n) 時間，嘗試每個可能的 x</li>
                <li><strong>Baby-step Giant-step：</strong>O(√n) 時間與空間的時空折衷</li>
                <li><strong>Pollard's Rho：</strong>O(√n) 期望時間，O(1) 空間</li>
                <li><strong>安全性基礎：</strong>DH、ElGamal、DSA 等協議的安全性依賴於此問題的困難度</li>
                <li><strong>原根：</strong>階等於 φ(p) 的元素，可以生成整個乘法群</li>
            </ul>
        </section>

        <!-- 頁尾 -->
        <footer class="footer">
            <p>
                <a href="../../../">Awesome Web Workers Examples 1000</a>
                &nbsp;|&nbsp;
                範例 #014 - 離散對數
            </p>
        </footer>
    </div>

    <script src="main.js"></script>
</body>
</html>
