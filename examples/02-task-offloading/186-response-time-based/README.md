# 基於響應時間的負載均衡 (Least Response Time)

此示例演示如何實現基於響應時間的負載均衡策略。系統會監控每個 Worker 的平均響應時間，並優先將任務分配給預期響應最快的 Worker。

## 功能

1.  **延遲模擬**：可以為每個 Worker 單獨設定基礎延遲，模擬異構環境（例如：快慢不同的服務器或處理器）。
2.  **EMA 平均**：使用指數移動平均 (Exponential Moving Average) 計算平滑的響應時間，避免單次網絡波動造成過大影響。
3.  **智慧調度**：算法綜合考慮 Worker 的歷史平均響應時間和當前排隊任務數，選擇得分最低（預期最快）的 Worker。
4.  **即時視覺化**：高亮顯示當前算法認為的最佳 Worker 選擇。

## 算法說明

選擇 Worker 的評分公式（越低越好）：

$$ Score_i = AvgResponseTime_i \times (ActiveTasks_i + 1) $$

其中：
- `AvgResponseTime`：使用 EMA 計算的歷史平均響應時間。
- `ActiveTasks`：Worker 當前正在處理的任務數量。

這種策略結合了「最小響應時間」和「最少連接數」的優點，能夠在避免過載單一節點的同時，優先使用性能較好的節點。

## 使用方式

1.  調整 "環境模擬" 中的滑桿，設定不同 Worker 的模擬延遲。例如，將 Worker 1 設為 100ms，Worker 4 設為 1000ms。
2.  觀察卡片背景色，紫色背景代表當前算法判斷的最佳選擇。
3.  提交任務或開啟自動任務，觀察任務分配傾向。您會發現延遲較低的 Worker 會被分配更多任務。
4.  嘗試在運行中動態改變某個 Worker 的延遲，觀察系統如何自動適應並調整分配策略。
