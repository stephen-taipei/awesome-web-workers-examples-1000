# 資源預留 (Resource Reservation)

本範例展示如何實作 Web Workers 的資源預留機制，以確保高優先級的關鍵任務在系統負載高時仍能獲得即時處理。

## 功能特點

1.  **資源池隔離**：
    -   **共用資源池 (Shared Pool)**：處理一般任務，數量較多。
    -   **預留資源池 (Reserved Pool)**：專門處理關鍵任務，即使共用池滿載，此池仍保持可用狀態。
2.  **優先級調度**：
    -   **普通任務**：僅能使用共用池。若共用池滿，進入等待佇列。
    -   **關鍵任務**：優先使用預留池。若預留池滿，可「溢出」使用共用池（如果共用池有空閒）。
3.  **資源支援**：
    -   當共用 Worker 完成任務時，會優先檢查是否有積壓的關鍵任務，若有則優先處理，實現資源支援。

## 技術重點

-   **多池架構**：維護兩組獨立的 Worker 陣列與任務佇列。
-   **QoS (Quality of Service)**：透過預留資源，保證關鍵業務的響應時間。
-   **任務搶佔 (邏輯層)**：雖然無法中斷正在執行的 Worker，但調度器在分配下一個任務時，會讓共用資源優先服務關鍵佇列。

## 使用方式

1.  設定總 Worker 數量與預留數量，點擊「套用配置」。
2.  點擊「普通任務洪流」，模擬大量低優先級任務湧入，填滿共用池。
3.  此時共用池變為紅色且有等待佇列，但預留池（黃色區域）仍是空的。
4.  點擊「+ 關鍵任務」，觀察任務會立即被分配到預留池執行，不受普通任務阻塞影響。

## 應用場景

-   **即時通訊**：在處理大量背景資料同步（普通任務）時，確保使用者發送的訊息（關鍵任務）能立即處理。
-   **UI 響應**：在進行複雜計算時，保留資源給 UI 相關的輔助計算。
-   **VIP 服務**：在伺服器端（Node.js Worker）場景中，為付費與免費使用者提供不同等級的服務保障。
