<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Actor Model - Web Worker Example #237</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Actor Model</h1>
            <p class="subtitle">Web Worker Example #237 - Message-Driven Concurrency</p>
        </header>

        <main>
            <section class="description">
                <h2>About Actor Model</h2>
                <p>The Actor Model is a mathematical model of concurrent computation where "actors" are the universal primitives. Each actor can receive messages, make local decisions, create more actors, and send messages to other actors. Actors process messages from their mailbox one at a time, ensuring safe concurrency without locks.</p>
                <div class="formula-box">
                    <p><strong>Actor Model Principles:</strong></p>
                    <pre class="formula">
Actor = State + Behavior + Mailbox

┌─────────────────────────────────────────┐
│                 Actor                    │
│  ┌──────────┐   ┌──────────────────┐   │
│  │ Mailbox  │ → │     Behavior     │   │
│  │ [m1,m2]  │   │  process(msg) {  │   │
│  └──────────┘   │    update state  │   │
│                 │    send messages │   │
│  ┌──────────┐   │    create actors │   │
│  │  State   │   │  }               │   │
│  │ {x: 42}  │   └──────────────────┘   │
│  └──────────┘                           │
└─────────────────────────────────────────┘

Key Properties:
• Isolation - Actors don't share state
• Location Transparency - Same API local/remote
• Asynchronous - Non-blocking message passing
• Supervision - Parent actors manage child failures

Common Patterns:
• Request-Reply: Actor A → Actor B → Actor A
• Fire-and-Forget: Actor A → Actor B (no reply)
• Scatter-Gather: Fan out, collect responses
• Pipeline: A → B → C → D (processing stages)
                    </pre>
                </div>
            </section>

            <section class="controls">
                <h2>Simulation Setup</h2>

                <div class="params-grid">
                    <div class="input-group">
                        <label for="scenario">Scenario:</label>
                        <select id="scenario">
                            <option value="bank">Bank Account Transfers</option>
                            <option value="counter">Distributed Counters</option>
                            <option value="pipeline">Processing Pipeline</option>
                            <option value="supervisor">Supervisor Hierarchy</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="actorCount">Number of Actors:</label>
                        <select id="actorCount">
                            <option value="4">4 Actors</option>
                            <option value="6" selected>6 Actors</option>
                            <option value="8">8 Actors</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="messageCount">Messages to Send:</label>
                        <select id="messageCount">
                            <option value="20">20 Messages</option>
                            <option value="50" selected>50 Messages</option>
                            <option value="100">100 Messages</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="processingTime">Processing Time (ms):</label>
                        <input type="number" id="processingTime" value="20" min="0" max="200" step="10">
                    </div>
                </div>

                <div id="scenarioDescription" class="problem-desc"></div>

                <div class="button-group">
                    <button id="startBtn" class="btn btn-primary">Start Simulation</button>
                    <button id="resetBtn" class="btn btn-outline">Reset</button>
                </div>
            </section>

            <section id="progressContainer" class="progress-section hidden">
                <div class="progress-bar-container">
                    <div id="progressBar" class="progress-bar"></div>
                </div>
                <p id="progressText" class="progress-text">Initializing actors...</p>
            </section>

            <section class="visualization">
                <h2>Actor System</h2>
                <canvas id="actorCanvas" width="600" height="400"></canvas>
            </section>

            <section id="messageLog" class="message-section">
                <h2>Message Log</h2>
                <div id="logContainer" class="log-container"></div>
            </section>

            <section id="resultContainer" class="result-section hidden">
                <h2>Results</h2>
                <div class="results-grid">
                    <div class="result-item">
                        <span class="result-label">Status</span>
                        <span id="status" class="result-value">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Messages Processed</span>
                        <span id="processedCount" class="result-value">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Total Actors</span>
                        <span id="totalActors" class="result-value">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Execution Time</span>
                        <span id="execTime" class="result-value">-</span>
                    </div>
                </div>
                <div class="stats-row">
                    <div class="result-item">
                        <span class="result-label">Avg Response Time</span>
                        <span id="avgResponseTime" class="result-value">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Max Mailbox Size</span>
                        <span id="maxMailbox" class="result-value">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Errors</span>
                        <span id="errors" class="result-value">-</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Throughput</span>
                        <span id="throughput" class="result-value">-</span>
                    </div>
                </div>

                <h3>Actor States</h3>
                <div id="actorStates" class="actor-states"></div>
            </section>
        </main>

        <footer>
            <p><a href="../index.html">Back to Examples</a> | Web Workers Example #237</p>
        </footer>
    </div>
    <script src="main.js"></script>
</body>
</html>
