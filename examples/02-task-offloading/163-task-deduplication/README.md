# 163. 任務去重 (Task Deduplication)

本範例展示如何實作「請求合併」或「任務去重」機制。當前端在短時間內對同一個資源或計算發出多次請求時，我們可以將這些請求合併為單一的 Worker 任務。

## 功能說明

- 模擬一個耗時 2 秒的 Worker 任務。
- 主執行緒維護一個 `pendingTasks` Map，記錄正在進行中的任務 Promise。
- 當發出請求時，先檢查 Map 中是否已有相同 ID 的任務：
    - **有 (Duplicate)**：直接回傳既有的 Promise，不啟動新 Worker。
    - **無 (New)**：建立新 Promise，啟動 Worker，並存入 Map。
- 這樣確保無論使用者狂點多少次，只要前一次任務還沒完成，就只會有一個 Worker 在跑。

## 技術重點

1.  **Promise Sharing**: 多個呼叫者可以 `await` 同一個 Promise 物件。
2.  **Pending Map**: 使用 Map 來追蹤進行中的非同步操作狀態。
3.  **資源節省**: 顯著減少不必要的計算資源浪費與網路請求。

## 使用方式

1. 輸入任務 ID (預設 "A")。
2. 點擊「快速發送 5 次請求」。
3. 觀察日誌：只有第一次會顯示 "NEW"，後續 4 次都會顯示 "DEDUP"。
4. 2 秒後，所有 5 個請求會同時收到相同的結果。
